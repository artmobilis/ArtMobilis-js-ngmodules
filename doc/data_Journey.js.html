<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: data/Journey.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: data/Journey.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
* deprecated, removed soon.
* @class Journey
* @memberOf angular_module.data
*/


angular.module('data')

.factory('Journey', function() {
  var Journey = function() {
    var that = this;

    var _pois = [];
    var _name = '';

    var _loading = false;
    var _on_load;
    var _on_error;

    var _root;

    var _json_loader = new AM.JsonLoader();


    this.Load = function(url, on_load, on_error) {
      if (_loading) {
        on_error('loading');
        return;
      }

      _loading = true;
      var loader = new AM.JsonLoader();

      loader.Load(url, function() {
        _loading = false;
        that.Parse(loader.json, on_load, on_error);
      }, function() {
        _loading = false;
        if (on_error) on_error(url);
        if (on_load) on_load();
      });
    };

    function LoadFileRec(list) {
      if (list.length !== 0) {

        var url = list.pop();

        _json_loader.Load(_root + url, function() {

          var json = _json_loader.json;
          _pois.push( {
            uuid: json.uuid,
            name: json.name || 'unnamed',
            latitude: json.latitude || 0,
            longitude: json.longitude || 0,
            radius: json.radius || 10,
            channels: json.channels || [],
            landmark: json.landmark
          } );
          LoadFileRec(list);

        }, function() {

          _on_error(url);
          LoadFileRec(list);

        });
      }
      else {
        _loading = false;
        if (_on_load) _on_load();
      }
    }

    this.Parse = function(json, on_load, on_error) {
      if (_loading)
        return;

      _loading = true;
      _on_load = on_load;
      _on_error = on_error;

      _pois.length = 0;
      _name = '';

      if (json.name) _name = json.name;

      _root = (json.POIs_root) ? json.POIs_root + '/' : '';

      if (json.POIs) {
       LoadFileRec(json.POIs);
      }
    };

    this.GetName = function() {
      return _name;
    };

    this.GetPOIs = function() {
      return _pois;
    };

    this.IsLoading = function() {
      return _loading;
    };


  };

  return Journey;


});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="angular_module.data.html">data</a></li><li><a href="angular_module.data.DataManagerSvc.html">DataManagerSvc</a></li><li><a href="angular_module.data.Journey.html">Journey</a></li><li><a href="angular_module.dataLoading.html">dataLoading</a></li><li><a href="angular_module.dataLoading.channelFactory.html">channelFactory</a></li><li><a href="angular_module.dataLoading.contentFactory.html">contentFactory</a></li><li><a href="angular_module.dataLoading.dataArrayFactory.html">dataArrayFactory</a></li><li><a href="angular_module.dataLoading.dataJourneyFactory.html">dataJourneyFactory</a></li><li><a href="angular_module.dataLoading.journeyFactory.html">journeyFactory</a></li><li><a href="angular_module.dataLoading.markerFactory.html">markerFactory</a></li><li><a href="angular_module.dataLoading.objectFactory.html">objectFactory</a></li><li><a href="angular_module.dataLoading.poiFactory.html">poiFactory</a></li><li><a href="angular_module.journey.html">journey</a></li><li><a href="angular_module.journey.GeolocationSvc.html">GeolocationSvc</a></li><li><a href="angular_module.journey.JourneyManagerSvc.html">JourneyManagerSvc</a></li><li><a href="angular_module.journey.JourneyRenderer.html">JourneyRenderer</a></li><li><a href="angular_module.journey.JourneySceneSvc.html">JourneySceneSvc</a></li><li><a href="angular_module.journey.trackingView.html">trackingView</a></li></ul><h3>Namespaces</h3><ul><li><a href="angular_module.html">angular_module</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Apr 19 2016 16:34:32 GMT+0200 (Paris, Madrid (heure d’été))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
